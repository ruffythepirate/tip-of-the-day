#!/bin/sh
ALL=$(cat ~/.tips)

LINES=$(echo "$ALL" | wc ~/.tips | awk '{$1=$1;print}' | cut -d' ' -f1)


until false; do
  MY_RANDOM=$(shuf -i 1-$LINES -n1)
  PHRASE=$(echo "$ALL" | head -n$MY_RANDOM | tail -n1 | awk '{$1=$1;print}')
  #This adds support for comments in the tips
  # If a row is found that starts with # we will find a new phrase
  if [[ ${PHRASE:0:1} != "#" ]] 
  then 
    break 
  fi
done

CATEGORY=$(echo "$ALL" | head -n$MY_RANDOM | grep ^# | tail -n1 | sed 's/#//' | xargs)

echo "======================================"
echo "Tip of the day... ($CATEGORY)"
echo "======================================"
echo "$PHRASE"
echo ""
